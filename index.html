<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vocabulary Flashcards</title>
  <link rel="stylesheet" href="style-v2.css" />
</head>
<body>
  <div class="app">
    <h1>Vocabulary Flashcards</h1>

    <div class="controls">
      <label for="sheet-select">Choose a Day:</label>
      <select id="sheet-select">
        <option value="day1">Day 1</option>
        <option value="day2">Day 2</option>
      </select>
    </div>

    <div id="card" class="card">
      <div class="card-inner">
        <div class="card-front" id="card-front">Loading...</div>
        <div class="card-back" id="card-back"></div>
      </div>
    </div>

    <div class="buttons">
      <button id="prev">Back</button>
      <button id="next">Next</button>
    </div>
  </div>

  <script>
    const urls = {
      day1: "https://docs.google.com/spreadsheets/d/e/2PACX-1vSm6VvHmCWfFh3Av-KM6IvuqcD_UdhNEq6-p_OE3V2e3BHs7boOoRb20Xq73isuU7eyvlqfl9SHNbMv/pub?gid=0&single=true&output=csv"
      day2: "https://docs.google.com/spreadsheets/d/e/2PACX-1vSm6VvHmCWfFh3Av-KM6IvuqcD_UdhNEq6-p_OE3V2e3BHs7boOoRb20Xq73isuU7eyvlqfl9SHNbMv/pub?gid=761404854&single=true&output=csv"
    };

    const card = document.getElementById("card");
    const front = document.getElementById("card-front");
    const back = document.getElementById("card-back");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const sheetSelect = document.getElementById("sheet-select");

    let cards = [];
    let currentCard = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    async function loadCards(day) {
      front.textContent = "Loading...";
      back.textContent = "";
      try {
        const response = await fetch(urls[day]);
        const text = await response.text();
        const lines = text.trim().split("\n").slice(1);
        cards = lines.map(line => {
          const [word, definition] = line.split(/,(.+)/);
          return { word: word.trim(), definition: definition.trim() };
        });
        shuffle(cards);
        currentCard = 0;
        updateCard();
      } catch (error) {
        front.textContent = "Error loading cards.";
        back.textContent = "";
        console.error("Failed to load sheet:", error);
      }
    }

    function updateCard() {
      const item = cards[currentCard];
      front.textContent = item.word;
      back.textContent = item.definition;
      card.classList.remove("flipped");
    }

    card.addEventListener("click", () => {
      card.classList.toggle("flipped");
    });

    prevBtn.addEventListener("click", () => {
      if (currentCard > 0) {
        currentCard--;
        updateCard();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentCard < cards.length - 1) {
        currentCard++;
        updateCard();
      }
    });

    sheetSelect.addEventListener("change", (e) => {
      const selected = e.target.value;
      loadCards(selected);
    });

    // Load Day 1 by default
    loadCards("day1");
  </script>
</body>
</html>









